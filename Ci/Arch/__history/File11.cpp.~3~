/*//---------------------------------------------------------------------------
 Чечелев Денис Сергеевич.
 МГТУ им. Н.Э.Баумана РТ5-11.
 1 курс, 1 модуль.
 2015
 Архиватор.
 Авторские права оставляю за Семеновым Дмитрием Валерьевичем,
 а также за А.А. Богуславским и С.М. Соколовым
*///---------------------------------------------------------------------------

#include <vcl.h>
#include <iostream.h>
#include <fstream.h>
//#include <locale.h>
#include <string.h>
#pragma hdrstop

//---------------------------------------------------------------------------

#pragma argsused

int DecToBin(int Dec)
{
int b[9],g[9], i=0, c, ans=0;
for ( i = 0; i <= 8; i++) {    // Обнуление массива B
		b[i]=NULL;
		g[i]=NULL;
	}
while (Dec!=0&&i>1)
{
	c=Dec%2;
	Dec=Dec/2;
		if(c==1)
			b[i]=b[i]*10+1;
		else
			b[i]=b[i]*10+0;
	i++;
}
for ( i = 8; i != -1; i--) {    // Обнуление массива B
	  if (b[i]!=NULL) {
		 ans=ans*10+b[8-i];
	  }
	}
return ans;
}



int main()
{
	int i,j;                                      // определение типа счётчиков
	double nenol=0;
	char a[256], character , ch;                        // Массив алфавита , символ (x2)
	int st[256],number;                                  // Численный массив статистики , номер символа
	for (i = 0; i < 256; i++)
		{
			st[i]=0;
		}
	for (i = 0; i <= 255; i++) {       // Запись таблицы  ASCII
		character = number;
		number++;
		a[i]= character;
	}
	for ( i = 0; i <= 255; i++) {     // Проверка массива "алфавита"
		cout << a[i];
	}
	cout << "\n";
	for ( i = 0; i <= 255; i++) {    // Обнуление массива статистики
		st[i]=0;
	}
	for ( i = 0; i <= 255; i++) {     // Проверка массива статистики
		cout << st[i];
	}
	cout << "\n";

	ifstream in_stream;                    //Переименовывание потоков ввода/вывода
	ofstream out_stream;
	in_stream.open("input.txt");           //открытие файла ввода и создание выходного
	out_stream.open("output.arh") ;

	while (! in_stream.eof()){             //Сбор статистики
		in_stream.get(ch);
		for (i = 0; i <= 255; i++) {
		  if (ch == a[i]) {
			 st[i]++;
			 break;
	  }
	}
	}
	in_stream.close();                     //Закрытие потока "ввода"
	for (i = 0; i < 256; i++)
		{
			for (j = 0; j < 256; j++)
				{
					if (st[i]>st[j])              // Сортировка в порядке убывания
						{
							int k = st[i];
							char l=a[i];
							a[i]= a[j];
							st[i]=st[j];
							a[j]=l;
							st[j]=k;

						}
				}
		}


	for (i = 0; i <= 255; i++){                     // Вывод отсортированного алфавита
		if (st[i]!=0){
		nenol++;
		}
		else a[i]=NULL;                                 //Отсечение лишних символов
	}
	cout <<  "\n";
	for (i = 0; i <= 255; i++){                     // Вывод отсортированного алфавит
		if (a[i]==NULL) {}
		else cout << a[i]<< " ";
	}
	cout <<  "\n";
	for (i = 0; i <= 255; i++){                     //  Вывод отсортированной статистики
		if (st[i]!=0){
			cout << st[i]<< " ";
		}
	}

	cout << "\n"<< nenol <<"\n";
	nenol=123;
	cout<< DecToBin(nenol);


	cin.get();
	return 0;
}

//---------------------------------------------------------------------------